let currentСoursePath,subtitlesContentSelector="span[data-purpose='cue-text']",activeSubtitleSelector="p[data-purpose='transcript-cue-active']",translatorUrl="https://translate.argosopentech.com/translate";const translateSubtitles=()=>{let b=document.querySelectorAll(subtitlesContentSelector),c=document.querySelector(activeSubtitleSelector).querySelector(subtitlesContentSelector);сurrentSubtitles=[...[...b].slice([...b].indexOf(c),[...b].length),...[...b].slice(0,[...b].indexOf(c))];for(let c of сurrentSubtitles)fetch(translatorUrl,{method:"POST",body:JSON.stringify({q:c.textContent,source:"en",target:"ru"}),headers:{"Content-Type":"application/json"}}).then(async d=>{let a=await d.json();c.innerText=a.translatedText})};setInterval(()=>{try{currentСoursePath!=document.location.pathname&&document.querySelector(activeSubtitleSelector).querySelector(subtitlesContentSelector)&&(currentСoursePath=document.location.pathname,translateSubtitles())}catch{}},1e3);
